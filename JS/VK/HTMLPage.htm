<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script type="text/javascript" src="swfobject/swfobject.js"></script>
    <script type="text/javascript" src="uppod-ajax/js/uppod_player.js"></script>
</head>
<body>
    <div id="data">
    </div>
    <script type="text/javascript">
        function play(url) {
            var flashvars = { st: "audio53-1229.txt", file: url, uid: "player1" };
            var params = { bgcolor: "#ffffff", allowFullScreen: "true", allowScriptAccess: "always" };
            var attributes = { id: "player1", name: "player" };
            swfobject.embedSWF("uppod.swf", "player", "500", "375", "10.0.0", false, flashvars, params, attributes);
            document.getElementById("player1").style.display = 'none';
        }

        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'http\://vk.hart-flamov.ru/PHP/stream.php', false);
        xhr.onreadystatechange = function () {
            if (xhr.readyState == 4)
                document.getElementById("data").innerHTML = xhr.responseText;
        }
        xhr.send(null)

        function uppodInit(playerID) {
            var s = setInterval(q, 1000)
            uppodSend("player1", 'play', function () { alert('end'); clearInterval(s) });
            function q() {
                var fullTime = fullTime || uppodGet("player1", "getimed");
                var currentTime = uppodGet("player1", "getime");
                var fullMin = Math.floor(fullTime / 60);
                var currentMin = Math.floor(currentTime / 60);
                var fullSec = Math.floor(fullTime - fullMin * 60);
                var currentSec = Math.floor(currentTime - currentMin * 60);
                document.getElementById("data").innerHTML = currentMin + ':' + (currentSec.toString().length == 1 ? '0' + currentSec : currentSec) + ' / ' + fullMin + ':' + fullSec;
            }
        };
    </script>
    <div id="player" onclick="play('http://94.25.53.133:80/ultra-128')">
        play</div>
    <button onclick="uppodStopAll()">
        Остановить</button>
    <div id="cont" style="position: absolute; top: 200px; left: 200px; width: 20px; height: 50px;">
        <div id="fon" style="position: absolute; top: 0px; left: 8px; width: 4px; height: 50px;
            background-color: Black">
        </div>
        <div id="slider" style="position: absolute; top: 0px; left: 0px; width: 20px; height: 20px;
            background-color: Teal">
        </div>
    </div>
    <script type="text/javascript">
        document.getElementById("slider").addEventListener("mousedown", q, false);
        document.getElementById("slider").addEventListener("mouseup", q1, false);
        document.body.addEventListener("mousemove", drag, false);
        var s = document.getElementById("slider");
        function q(e) {
            var s = document.getElementById("slider");
            s.capX = e.clientX; +//document.body.scrollLeft - parseInt(s.offsetLeft);
            s.capY = e.clientY; + //document.body.scrollTop - parseInt(s.offsetTop);
            s.drag = true;
            
        }
        function q1(e) {
            if (s.drag){s.drag = false}
        }
        function drag(e) {
            if (s.drag) {
                elx = parseInt(e.clientX) - s.capX;
                ely = parseInt(e.clientY) - s.capY;
                s.style.left = e.clientX + document.body.scrollLeft - elx;
                s.style.top = e.clientY + document.body.scrollTop - ely;
            }
        }
    </script>
</body>
</html>
